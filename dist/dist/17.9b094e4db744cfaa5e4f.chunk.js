webpackJsonp([17],{1254:function(e,t,a){var n=a(1255);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(63)("0f530254",n,!1,{})},1255:function(e,t,a){t=e.exports=a(62)(!1),t.push([e.i,"\n.search-wrapper {\n  margin-bottom: 10px;\n}\n.search-form .ivu-form-item {\n  margin-bottom: 10px;\n}\n.btn-group .ivu-form-item {\n  margin-bottom: 0px;\n}\n.table-btn-group {\n  padding-bottom: 15px;\n}\n.leftCon {\n  width: 49%;\n  display: inline-block;\n  border: 1px solid #e9eaec;\n  min-height: 300px;\n  padding: 5px;\n}\n.rightCon {\n  width: 49%;\n  display: inline-block;\n  float: right;\n  border: 1px solid #e9eaec;\n  min-height: 300px;\n  padding: 5px;\n}\n.page-wrapper {\n  margin-top: 10px;\n  text-align: right;\n}\n",""])},1256:function(e,t,a){"use strict";function n(e,t){var a={caseNo:e.caseNo,tribunalId:e.court,briefName:e.brief,judgeName:e.judge,clerkName:e.clerk,startDate:e.startDate,endDate:e.endDate,isMaster:e.isMaster,associate:e.associate,litigantName:e.litigantName,pageSize:t.pageSize,pageNumber:t.pageNumber};return u({url:"/court/scheduling/bindList.jhtml",method:"get",params:a})}function s(e){return u({url:"/court/case/noAssociate/lawCase.jhtml",method:"get",params:{caseNo:e}})}function i(e){return u({url:"/court/scheduling/indexLawCaseSchedulding.jhtml",method:"get",params:{lawCaseId:e}})}function o(e){return u({url:"/court/case/associate/lawCase.jhtml",method:"get",params:{lawCaseId:e}})}function c(e,t){return u({url:"/court/case/associate.jhtml",method:"get",params:{slaveIds:e,masterId:t}})}function r(e,t){return u({url:"/court/case//associate/cancel.jhtml",method:"get",params:{slaveIds:e,masterId:t}})}Object.defineProperty(t,"__esModule",{value:!0}),t.bindList=n,t.connectList=s,t.lawCaseSchedulding=i,t.lawCaseConnectGet=o,t.associate=c,t.associateCancel=r;var l=a(36),h=function(e){return e&&e.__esModule?e:{default:e}}(l),u=h.default.ajax},1257:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"search-wrapper"},[a("Form",{attrs:{model:e.searchData,inline:"","label-width":100}},[a("FormItem",{attrs:{label:"案号"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.searchData.caseNo,callback:function(t){e.$set(e.searchData,"caseNo",t)},expression:"searchData.caseNo"}})],1),e._v(" "),a("FormItem",{attrs:{label:"案由"}},[a("Select",{staticStyle:{width:"200px","vertical-align":"middle"},model:{value:e.searchData.brief,callback:function(t){e.$set(e.searchData,"brief",t)},expression:"searchData.brief"}},e._l(e.reasonList,function(t){return a("Option",{key:t.brief,attrs:{value:t.brief}},[e._v(e._s(t.brief))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"审判员"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.searchData.judge,callback:function(t){e.$set(e.searchData,"judge",t)},expression:"searchData.judge"}})],1),e._v(" "),a("FormItem",{attrs:{label:"书记员"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.searchData.clerk,callback:function(t){e.$set(e.searchData,"clerk",t)},expression:"searchData.clerk"}})],1),e._v(" "),a("FormItem",{attrs:{label:"开庭时间"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"datetimerange",placement:"bottom-end"},model:{value:e.searchData.date,callback:function(t){e.$set(e.searchData,"date",t)},expression:"searchData.date"}})],1),e._v(" "),a("FormItem",{attrs:{label:"绑定状态"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.searchData.isMaster,callback:function(t){e.$set(e.searchData,"isMaster",t)},expression:"searchData.isMaster"}},[a("Option",{attrs:{value:"-1"}},[e._v("未绑定")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("已绑定")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"关联编号"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.searchData.associate,callback:function(t){e.$set(e.searchData,"associate",t)},expression:"searchData.associate"}})],1),e._v(" "),a("FormItem",{attrs:{label:"当事人"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.searchData.litigantName,callback:function(t){e.$set(e.searchData,"litigantName",t)},expression:"searchData.litigantName"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right","padding-left":"20px"}},[a("Button",{attrs:{type:"ghost"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"ghost"},on:{click:e.emptySearchList}},[e._v("清空")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"ghost"},nativeOn:{click:function(t){e.searchFormShow=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("Card",[a("div",{staticClass:"table-btn-group"},[a("Button",{attrs:{type:"primary"},on:{click:e.connectionM}},[e._v("添加关联")])],1),e._v(" "),a("Table",{ref:"selection",attrs:{stripe:"",columns:e.col,data:e.colData},on:{"on-select":e.onSelect,"on-selection-change":e.onSelectChange}}),e._v(" "),a("div",{staticClass:"page-wrapper"},[a("Page",{attrs:{total:Number(e.pageData.total),"page-size":e.pageData.pageSize,current:e.pageData.pageNumber,"page-size-opts":[5,10,20],"show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}})],1)],1),e._v(" "),a("Modal",{attrs:{width:"950","ok-text":"确认",title:"案件关联"},on:{"on-ok":function(e){}},model:{value:e.connectModal,callback:function(t){e.connectModal=t},expression:"connectModal"}},[a("div",{staticClass:"leftCon"},[a("div",{staticClass:"table-btn-group",staticStyle:{"border-bottom":"1px solid #e9eaec","padding-bottom":"20px","padding-left":"5px"}},[a("h4",{staticStyle:{display:"inline-block","margin-top":"5px"}},[e._v("已关联案件")]),e._v(" "),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.cancelConnection}},[e._v("取消关联")])],1),e._v(" "),a("Table",{ref:"selection",staticStyle:{"margin-top":"10px"},attrs:{height:"220",columns:e.connectedCol,data:e.connectedData},on:{"on-selection-change":e.onSelectChangeConed}})],1),e._v(" "),a("div",{staticClass:"rightCon"},[a("Form",{staticClass:"search-form",staticStyle:{"border-bottom":"1px solid #e9eaec"},attrs:{"label-width":60,inline:""}},[a("Button",{attrs:{type:"primary"},on:{click:e.connection}},[e._v("关联绑定")]),e._v(" "),a("FormItem",{attrs:{label:"案号"}},[a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入案号"},model:{value:e.searchConnectData.caseNo,callback:function(t){e.$set(e.searchConnectData,"caseNo",t)},expression:"searchConnectData.caseNo"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.searchConnectList}},[e._v("查询")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"ghost"},on:{click:e.emptySearchList}},[e._v("清空")])],1)],1),e._v(" "),a("Table",{ref:"selection",staticStyle:{"margin-top":"10px"},attrs:{height:"220",columns:e.detailColumns,data:e.noneData},on:{"on-select":e.onSelectCon,"on-selection-change":e.onSelectChangeCon}})],1)]),e._v(" "),a("Modal",{attrs:{loading:e.loading,"ok-text":"关联",width:"630",title:"案件关联"},on:{"on-ok":e.connectionSubmit},model:{value:e.connectionModal,callback:function(t){e.connectionModal=t},expression:"connectionModal"}},[a("Form",{attrs:{model:e.searchData,inline:"","label-width":100}},[a("FormItem",{attrs:{label:"请选择主案件"}},[a("RadioGroup",{model:{value:e.master,callback:function(t){e.master=t},expression:"master"}},e._l(e.onSelectData,function(t){return a("Radio",{attrs:{label:t.id}},[e._v(e._s(t.caseNo))])}))],1)],1)],1)],1)},s=[];n._withStripped=!0;var i={render:n,staticRenderFns:s};t.default=i},578:function(e,t,a){"use strict";function n(e){l||a(1254)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(844),i=a.n(s);for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);var c=a(1257),r=a.n(c),l=!1,h=a(31),u=n,d=h(i.a,r.a,!1,u,null,null);d.options.__file="src\\views\\connection\\connection.vue",t.default=d.exports},603:function(e,t,a){"use strict";function n(){return f({url:"/court/createCase/queryBrief.jhtml",method:"get"})}function s(e){return f({url:"/court/scheduling/queryTribunals.jhtml",method:"get",params:{id:e}})}function i(e,t,a){return f({url:"/court/send/queryLawCase.jhtml",method:"POST",params:{caseNo:e,plaintiffName:t,defendantName:a}})}function o(e){return f({url:"/court/infoManage/queryLawCaseAll.jhtml",method:"GET",params:{id:e}})}function c(e,t,a,n,s,i,o){return f({url:"/court/infoManage/queryLawCase.jhtml",method:"GET",params:{caseNo:e,caseName:t,briefName:a,litigantName:n,filingDate1:s,filingDate2:i,pageNumber:o}})}function r(e){return f({url:"/court/process/queryProcessNote.jhtml",method:"GET",params:{lawCaseId:e}})}function l(e){return f({url:"/court/infoManage/lawCaseInfo.jhtml",method:"GET",params:{caseNo:e}})}function h(){return f({url:"/court/infoManage/courtList.jhtml",method:"GET"})}Object.defineProperty(t,"__esModule",{value:!0}),t.getBrief=n,t.getTribunal=s,t.queryCase=i,t.queryCaseInfo=o,t.caselist=c,t.queryProcessNote=r,t.searchCase=l,t.courtList=h;var u=a(36),d=function(e){return e&&e.__esModule?e:{default:e}}(u),f=d.default.ajax},844:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(144),s=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(1256),o=a(217),c=a(603);t.default={data:function(){var e=this;return{loading:!0,searchFormShow:!1,connectionModal:!1,master:"",connectModal:!1,reasonList:[],noneData:[],connectType:1,connectedData:[],searchData:{caseNo:this.$store.getters.caseNo,brief:"",court:"",judge:"",clerk:"",date:[],startDate:"",endDate:"",isMaster:"",associate:"",litigantName:""},searchConnectData:{caseNo:""},pageData:{pageNumber:1,pageSize:10,total:0},tableSelectedNum:0,onSelectData:[],nowLawCaseId:"",connectedCol:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"案号",key:"caseNo",align:"center",width:210,render:function(e,t){return"主"==t.row.isMaster?e("span",{props:{type:"default",size:"small"}},t.row.caseNo+" (主)"):e("span",{props:{type:"success",size:"small"}},t.row.caseNo)}},{title:"案由",key:"brief",align:"center",width:160}],detailColumns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"案号",key:"caseNo",align:"center",width:210},{title:"案由",key:"brief",align:"center",width:160}],col:[{title:"案号",key:"caseNo",width:220,align:"center",fixed:"left",render:function(t,a){return"关联"==a.row.isMaster?t("a",{props:{type:"default",size:"small"},on:{click:function(){e.connectModal=!0;var t=a.row.id;e.master=a.row.id,(0,i.lawCaseConnectGet)(t).then(function(t){if(e.noneData=[],e.searchConnectData.caseNo="",e.connectedData=[],e.connectType=2,100==t.data.state){var a=t.data.result;console.log(a),a.associateLawCase.map(function(t){console.log(t);var a=(0,s.default)({id:t.id,caseNo:t.caseNo,brief:t.brief.name,isMaster:t.isMaster},"isMaster",1==t.isMaster?"主":"");e.connectedData.push(a)})}else e.$Message.error(t.data.message)})}}},a.row.caseNo+" (关联)"):t("a",{props:{type:"success",size:"small"},on:{click:function(){}}},a.row.caseNo)}},{title:"案由",key:"brief",align:"center",width:120},{title:"立案时间",key:"filingDate",align:"center",width:120},{title:"法庭",key:"tribunal",align:"center",width:120},{title:"开庭时间",key:"startDate",align:"center",width:150},{title:"审判员",key:"judge",align:"center",width:120},{title:"书记员",key:"clerk",align:"center",width:120},{title:"绑定状态",key:"colIsMaster",align:"center",width:120},{title:"关联编码",key:"associate",align:"center",width:120}],colData:[]}},created:function(){var e=this;this.onRefreshList(),(0,c.getBrief)().then(function(t){100===t.data.state&&(e.reasonList=t.data.result)}).catch(function(e){})},methods:{connectionM:function(){this.noneData=[],this.searchConnectData.caseNo="",this.connectedData=[],this.onSelectData=[],this.connectType=1,this.connectModal=!0},searchConnectList:function(){var e=this;this.pageData.pageNumber=1,console.log(this.searchConnectData.caseNo),(0,i.connectList)(this.searchConnectData.caseNo).then(function(t){if(1==t.data.state){var a=t.data.result;console.log(a),e.pageData.total=a.total,a.map(function(t){var a=(0,s.default)({id:t.id,caseNo:t.caseNo,brief:t.brief.name,filingDate:(0,o.formatDate)(new Date(t.filingDate),"yyyy-MM-dd"),isMaster:t.isMaster,colIsMaster:null==t.isMaster?"未绑定":"已绑定",associate:null==t.associate?"无":t.associate},"isMaster",null==t.isMaster?" ":"关联");e.noneData.push(a)})}})},changeLoading:function(){var e=this;this.loading=!1,this.$nextTick(function(){e.loading=!0})},handleSelectAll:function(e){this.$refs.selection.selectAll(e)},pageChange:function(e){this.pageData.pageNumber=e,this.tableSelectedNum=0,this.onRefreshList()},pageSizeChange:function(e){this.pageData.pageSize=e,this.tableSelectedNum=0,this.onRefreshList()},onSelect:function(e,t){this.tableSelectedNum=e.length},onSelectCon:function(e,t){},onSelectChangeCon:function(e){this.onSelectData=e},onSelectChangeConed:function(e){this.onSelectData=e},onSelectChange:function(e){this.onSelectData=e,this.tableSelectedNum=e.length},searchList:function(){2==this.searchData.date.length&&(this.searchData.startDate=new Date(this.searchData.date[0]).getTime(),this.searchData.endDate=new Date(this.searchData.date[1]).getTime()+828e5+354e4+59e3),this.onRefreshList()},emptySearchList:function(){this.searchData.caseNo="",this.searchData.brief="",this.searchData.court="",this.searchData.judge="",this.searchData.clerk="",this.searchData.isMaster="",this.searchData.startDate="",this.searchData.endDate="",this.searchData.date=[],this.searchData.associate="",this.searchData.litigantName="",this.pageData.pageNum=1,this.pageData.pageSize=10,this.onRefreshList(),this.noneData=[],this.searchConnectData.caseNo=""},onRefreshList:function(){var e=this;this.$store.commit("SET_CASENO",this.searchData.caseNo),(0,i.bindList)(this.searchData,this.pageData).then(function(t){if(e.colData=[],1==t.data.state){var a=t.data.result;e.pageData.total=a.total,a.content.map(function(t){try{var a=(0,o.formatDate)(new Date(t.startDate.replace(/-/g,"/")),"yyyy-MM-dd hh:mm")}catch(e){var a=(0,o.formatDate)(new Date(t.startDate),"yyyy-MM-dd hh:mm")}var n=(0,s.default)({id:t.lawCase.id,caseNo:t.lawCase.caseNo,brief:t.lawCase.brief.name,filingDate:(0,o.formatDate)(new Date(t.lawCase.filingDate),"yyyy-MM-dd"),tribunal:t.tribunal.name,startDate:a,address:t.tribunal.name,judge:t.judge.name,clerk:t.clerk.name,isMaster:t.lawCase.isMaster,colIsMaster:null==t.lawCase.isMaster?"未绑定":"已绑定",associate:null==t.lawCase.associate?"无":t.lawCase.associate},"isMaster",null==t.lawCase.isMaster?" ":"关联");e.colData.push(n)})}})},connection:function(){var e=this;if(1==this.connectType)this.connectionModal=!0;else{var t="";this.onSelectData.map(function(a,n){n!=e.onSelectData.length-1?t+=a.id+",":t+=a.id}),(0,i.associate)(t,this.master).then(function(t){if(100==t.data.state){e.connectionModal=!1,e.$Message.success(t.data.message),e.changeLoading(),console.log(e.onSelectData);for(var a=0;a<e.onSelectData.length;a++)e.connectedData.push(e.onSelectData[a]);for(var a=0;a<e.noneData.length;a++)for(var n=0;n<e.onSelectData.length;n++)e.onSelectData[n].id==e.noneData[a].id&&e.noneData.splice(a,1)}else e.$Message.error(t.data.message),e.changeLoading()})}},cancelConnection:function(){var e=this;if(0==this.onSelectData.length)this.$Message.error("请选择需要取消关联的案件");else{var t="",a=[];this.onSelectData.map(function(n,s){s!=e.onSelectData.length-1?t+=n.id+",":t+=n.id,a.push(n.id)}),(0,i.associateCancel)(t,this.master).then(function(t){if(100==t.data.state){e.$Message.success(t.data.message),e.onRefreshList();for(var n=0;n<e.connectedData.length;n++)for(var s=0;s<a.length;s++)a[s]==e.connectedData[n].id&&e.connectedData.splice(n,1)}else e.$Message.error(t.data.message)})}},connectionSubmit:function(){var e=this,t="";this.onSelectData.map(function(a,n){a.id!=e.master&&(n!=e.onSelectData.length-1?t+=a.id+",":t+=a.id)}),(0,i.associate)(t,this.master).then(function(t){if(100==t.data.state){e.connectionModal=!1,e.$Message.success(t.data.message),e.changeLoading(),console.log(e.onSelectData);for(var a=0;a<e.onSelectData.length;a++)e.master==e.onSelectData[a].id&&(e.onSelectData[a].isMaster="主"),e.connectedData.push(e.onSelectData[a]);for(var a=0;a<e.noneData.length;a++)for(var n=0;n<e.onSelectData.length;n++)e.onSelectData[n].id==e.noneData[a].id&&e.noneData.splice(a,1)}else e.$Message.error(t.data.message),e.changeLoading()})}},filters:{formatDate:function(e){if(""==e)return"";var t=new Date(e);return(0,o.formatDate)(t,"yyyy-MM-dd")},whether:function(e){return e?"是":"否"},filCheck:function(e){return 0==e?"未确认":"已确认"},formatStartDate:function(e){if(""==e)return"";var t=new Date(e);return(0,o.formatDate)(t,"yyyy-MM-dd hh:mm")}}}}});